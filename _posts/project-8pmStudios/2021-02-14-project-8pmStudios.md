---
layout: post
title: 8pm STUDIOS ğŸ¿
date: 2021-01-14 09:29:20 +0700
modified: 2021-02-17 21:49:47 +07:00
categories: Projects
tags: [RAPA, Project, VR]
description: 8pm STUDIOSëŠ” ì•„ë§ˆì¶”ì–´ ë°°ìš°, ì‘ê°€, ì—°ì¶œ, ì´¬ì˜ê°ë…ë“¤ì„ ì—°ê²°í•˜ëŠ” ê°€ìƒ ì˜í™” ì´¬ì˜ í”Œë«í¼ì´ë‹¤.
image: /project-8pmStudios/intro.png
---

<figure>
<img src="/project-8pmStudios/intro.png" alt="8pm Studios intro">
</figure>

**íŒ€ëª…:** 8pm\
**íŒ€ì›:** ê¹€í˜„ìš°, ê¹€ì§€ìœ¤, ì‹ ì² í˜¸\
**ê°œë°œ í™˜ê²½:** Unity 2020.1 URP, Visual Studio, GitLab\
**ì œì‘ ê¸°ê°„:** 2020.12.28 ~ 2021.02.08\
**YouTube:** [ì˜í™” 'ì•„ì €ì”¨'ì˜ "ì´ê±° ë°©íƒ„ ìœ ë¦¬ì•¼" ì´¬ì˜](https://www.youtube.com/watch?v=TJJc4M2P2yM)
<br />

<hr>

# Index

**1. [<kbd> í”„ë¡œì íŠ¸ ì†Œê°œ </kbd>](#í”„ë¡œì íŠ¸-ì†Œê°œ)**
- [<kbd> ëª©ì  </kbd>](#ëª©ì )
- [<kbd> êµ¬ì¡° </kbd>](#êµ¬ì¡°)
- [<kbd> ì—­í•  ë¶„ë‹´ ë° ìˆ˜í–‰ ì ˆì°¨ </kbd>](#ì—­í• -ë¶„ë‹´-ë°-ìˆ˜í–‰-ì ˆì°¨)

**2. [<kbd> í”„ë¡œì íŠ¸ ê¸°ëŠ¥ </kbd>](#í”„ë¡œì íŠ¸-ê¸°ëŠ¥)**
- [<kbd> FilmCamera </kbd>](#1-filmcamera)
- [<kbd> ControlDeskSystem </kbd>](#2-controldesksystem)
- [<kbd> CameraPathCreator </kbd>](#3-camerapathcreator)\
<br />

<hr>

# í”„ë¡œì íŠ¸ ì†Œê°œ

<kbd>8pm STUDIOS</kbd>ëŠ” ë°°ìš°, ì‘ê°€, ì—°ì¶œ, ì´¬ì˜ê°ë…ì„ ìœ„í•œ **ê°€ìƒ ì˜í™” ì´¬ì˜ í”Œë«í¼**ì´ë‹¤.

### ëª©ì 

ê²½ì œì , ë¬¼ë¦¬ì  ì œì•½ìœ¼ë¡œ ì¸í•´ ìì‹ ì˜ ì‘í’ˆì„ ë§Œë“¤ê¸° ì–´ë ¤ìš´ ì˜í™”ì¸ê³¼ ì˜í™”ì¸ ì§€ë§ìƒë“¤ì´ VR ìƒì—ì„œ ììœ ë¡­ê²Œ ë°°ê²½ ë° ì†Œí’ˆì„ ì‚¬ìš©í•˜ê³  ì„œë¡œ ë„¤íŠ¸ì›Œí‚¹í•˜ì—¬ ì‘í’ˆì„ ì´¬ì˜í•  ìˆ˜ ìˆë‹¤.

**ë‹ˆì¦ˆ**
- ë‹¤ì–‘í•œ ì‘í’ˆì˜ í™˜ê²½ ì•ˆì—ì„œ ì—°ê¸°í•˜ê³  ì‹¶ì€ ë°°ìš°
- ì˜¤ë¦¬ì§€ë„ ì»¨í…ì¸ ë¥¼ ì„ ë³´ì´ê³  ì‹¶ì€ ê°ë… ë° ì‘ê°€
- í”„ë¦¬ ë¹„ì£¼ì–¼(Pre-Visualization)ì„ í†µí•œ ë™ì˜ìƒ ì½˜í‹° ì œì‘
- ì»¨í…ì¸ ë¥¼ ë°œêµ´í•´ì•¼ í•˜ëŠ” ì œì‘ì ë“±

**ê¸°ëŒ€ íš¨ê³¼**
- ì˜í™” ì œì‘ ì§„ì… ì¥ë²½ì„ ë‚®ì¶¤
- ì˜í™” ë° ì• ë‹ˆë©”ì´ì…˜ ì œì‘ì„ ìœ„í•œ ê°€ìƒí˜„ì‹¤ ì½˜í‹° ë“±ìœ¼ë¡œ í™œìš©ì„ ë„ëª¨
- 2ì°¨ ì°½ì‘ì„ í†µí•´ ì˜í™”íŒ¬ë“¤ì—ê²Œ ì˜í™” ì† ì£¼ì¸ê³µì´ ëœ ë“¯í•œ ì²´í—˜ì„ ì œê³µ

### êµ¬ì¡°

ì‚¬ìš©ìë“¤ì€ ì œì‘ ì˜í™”ì˜ ì£¼ì œ ë˜ëŠ” í‚¤ì›Œë“œë³„ë¡œ ë°©ì„ ë§Œë“¤ê³  í•„ìš”í•œ ì—­í• ì„ êµ¬í•  ìˆ˜ ìˆë‹¤. íŒ€ì´ êµ¬ì„±ë˜ë©´ ë°°ìš°ëŠ” ê°€ìƒ í™˜ê²½ ì†ì—ì„œ ì—°ê¸°ë¥¼ í•˜ê³  ì—°ì¶œê°ë…ì€ í™˜ê²½ ì„¸íŒ…ì„ í•˜ë©° ì´¬ì˜ê°ë…ì€ ì´¬ì˜ì„ ì§„í–‰í•œë‹¤. ì „ì²´ì ì¸ í”Œë¡œìš°ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

### ì—­í•  ë¶„ë‹´ ë° ìˆ˜í–‰ ì ˆì°¨
##### : íŒ€ êµ¬ì„±ì›

| <img class="round" src="profileHW.JPG" width="130px"> | <img class="round" src="profileJY.jpeg" width="130px"> | <img class="round" src="profileCH.jpeg" width="130px"> |
| ê¹€í˜„ìš°               | ê¹€ì§€ìœ¤                 | ì‹ ì² í˜¸                 |
| :----------------: | :-------------------: | :------------------: |
| ì¹´ë©”ë¼ ê¸°ëŠ¥, ì»¨íŠ¸ë¡¤ ë°ìŠ¤í¬   | ì½˜í…ì¸  ê¸°íš, ì¸ë²¤í† ë¦¬, ë¡œë¹„ | ë„¤íŠ¸ì›Œí¬, í”Œë ˆì´ì–´ ì¸í„°ë ‰ì…˜ |

##### : ê°œë°œ ì¼ì •
@startmermaid
gantt
    dateFormat  YYYY-M-D
    section ì‚¬ì „ ê¸°íš
    í”„ë¡œì íŠ¸ ê¸°íš ë° ì£¼ì œ ì„ ì •    :pre1, 2020-12-28, 3d
    ê¸°íšì•ˆ ì‘ì„±, ë ˆí¼ëŸ°ìŠ¤ ìˆ˜ì§‘    :pre2, 2020-12-31, 4d
    section í”„ë¡œí† íƒ€ì…
    ì¹´ë©”ë¼ ë…¹í™”, ì¤Œ, í¬ì»¤ìŠ¤    :proto1, 2021-01-04, 4d
    ì¹´ë©”ë¼ í´ë˜í¼ë³´ë“œ, í”„ë¦¬ë·° í™”ë©´    :proto2, 2021-01-08, 2d
    VR input ì—°ê²°    :proto3, after proto2, 1d
    section ì•ŒíŒŒ
    ë²„ê·¸ ìˆ˜ì •    :alpha1, 2021-01-12, 3d
    Refactoring, ì´ë²¤íŠ¸ë¡œ ë³€ê²½    :alpha2, 2021-01-13, 3d
    ì¹´ë©”ë¼ ì»¨íŠ¸ë¡¤ëŸ¬, ì„ íƒ ë…¹í™”    :alpha3, after alpha2, 1d
    ì¹´ë©”ë¼ ì»¨íŠ¸ë¡¤ëŸ¬, í”„ë¦¬ë·° ì „í™˜    :alpha4, after alpha3, 3d
    ì¹´ë©”ë¼ ì»¨íŠ¸ë¡¤ëŸ¬, ë…¹í™”ëœ ì˜ìƒ ì¬ìƒ    :alpha5, after alpha4, 4d
    ì¹´ë©”ë¼ ì»¨íŠ¸ë¡¤ëŸ¬, ë·° ëª¨ë“œ/ ë…¹í™” ëª¨ë“œ    :alpha6, after alpha5, 1d
    section ë² íƒ€
    ì¹´ë©”ë¼ ê²½ë¡œ, ë² ì´ì§€ì–´ ì»¤ë¸Œ    :beta1, 2021-01-26, 3d
    ì¹´ë©”ë¼ ê²½ë¡œ, ìƒì„±ê¸°    :beta2, after beta1, 3d
    ì¹´ë©”ë¼ ê²½ë¡œ, ë²„ê·¸ ìˆ˜ì •    :beta3, after beta2, 4d
    ì˜ìƒ ì´¬ì˜, ë°œí‘œì¤€ë¹„    :beta4, after beta3, 2d
@endmermaid

# í”„ë¡œì íŠ¸ ê¸°ëŠ¥

## 1. FilmCamera

<figure>
<img src="/project-8pmStudios/cameraFunctions.png" alt="Camera Functions">
<figcaption>Fig 1. Camera Functions.</figcaption>
</figure>

ê°€ìƒ ì˜í™” ì´¬ì˜ ì‹œ ì´¬ì˜ê°ë…ì´ ì‚¬ìš©í•  ì¹´ë©”ë¼ì´ë‹¤. ë¬¼ë¦¬ì ì¸ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  VR ë²„íŠ¼ê³¼ ì¡°ì´ìŠ¤í‹± ì¸í„°ë ‰ì…˜ì„ í†µí•´ ì¹´ë©”ë¼ë¥¼ ì œì–´í•  ìˆ˜ ìˆë‹¤. ì´ë¥¼ í†µí•´ ì‚¬ìš©ìì˜ **ëª°ì…ê°**ê³¼ **ì‚¬ìš©ì ê²½í—˜**ì˜ í€„ë¦¬í‹°ë„ ë†’ì¼ ìˆ˜ ìˆë‹¤. ë˜í•œ ì¹´ë©”ë¼ì˜ ê¸°ëŠ¥ì„ ì‚¬ìš©ìì˜ ë‹ˆì¦ˆì— ë§ê²Œ ì„¤ê³„í•  ìˆ˜ ìˆë‹¤. ë„ˆë¬´ ë§ì€ ë²„íŠ¼ì„ í•œ ë²ˆì— ì œê³µ í•˜ëŠ” ê²ƒ ë³´ë‹¤ ì›í•˜ëŠ” ê¸°ëŠ¥ì„ ì›í•˜ëŠ” ë²„íŠ¼ì— ì¶”ê°€í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„í•˜ì˜€ë‹¤.

**Camera Functions**
- *Primary Button* : Record; Start, Stop
- *Secondary Button* : Record; Cancel
- *Menu Button* : Control Detail Functions
- *Joystick* : Zoom; In/Out, On/Off
- *Focus* : On/Off
- *Stabilizer* : Always On
- *Clapper Board* : Auto Update Info
- *Preview Screen* : Show Camera State

### a. êµ¬ì¡°

<kbd>FilmCamera</kbd>ì˜ êµ¬ì¡°ë¥¼ ë§Œë“¤ ë•Œ '**Dependency Cycle**'ì„ í•­ìƒ ì—¼ë‘ì— ë‘ê³  ì¢…ì†ì„±ì„ ëŠì–´ ì£¼ê¸° ìœ„í•´ ë…¸ë ¥í–ˆë‹¤. ë”°ë¼ì„œ <kbd>FilmCameraController</kbd>ì—ì„œ ì¹´ë©”ë¼ì˜ ëª¨ë“  ê¸°ëŠ¥ì„ ì°¸ì¡°í•˜ê³  ìˆëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì¹´ë©”ë¼ì˜ ê¸°ëŠ¥ë“¤ì´ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì°¸ì¡°í•˜ê³  ê° ê¸°ëŠ¥ì´ ì•Œë§ì€ ì½œë°±í•¨ìˆ˜ì— êµ¬ë…í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì„¤ê³„í•˜ì˜€ë‹¤. ì´ë ‡ê²Œ ì„¤ê³„í•¨ìœ¼ë¡œì¨ <kbd>FilmCameraController</kbd>ê°€ ì¹´ë©”ë¼ ê¸°ëŠ¥ë“¤ë¡œë¶€í„° ììœ ë¡œì›Œì§€ê³  ì›í•˜ëŠ” ê¸°ëŠ¥ì„ ì½”ë“œì˜ ìˆ˜ì • ì—†ì´ ì¶”ê°€í•˜ê±°ë‚˜ ëº„ ìˆ˜ ìˆê²Œ ë˜ì—ˆë‹¤.

##### : Delegate Functions

{% highlight cs %}
#region Delegates
public delegate void FilmCamButton();
public delegate void FilmCamJoystick(float val);

public FilmCamButton PrimaryButtonAction;
public FilmCamButton SecondaryButtonAction;
public FilmCamButton MenuButtonAction;
public FilmCamJoystick JoystickAction;
#endregion
{% endhighlight %}

##### : FilmCamera Sequence Diagram

@startmermaid
sequenceDiagram
    participant FCC as FilmCameraController
    participant CZ as CameraZoom
    participant CR as CameraRecord
    participant CB as ClapperBoard
    participant CS as CameraStabilizer
    participant CF as CameraFocus
    participant C as Camera
    
    activate FCC
    activate C
    activate CS
    CS->>C: Perform Stabilize
    FCC-->>CF: Auto focus On/Off Invoke
        activate CF
        alt auto focus on
            CF->>C: Activate Focus
        else auto focus off
            CF->>C: Deactivate Focus
            deactivate CF
        end
    FCC-->>CZ: OnValueChange Invoke
    activate CZ
        alt negative value
            CZ->>C: Perform Zoom In
        else positive value
            CZ->>C: Perform Zoom Out
            deactivate CZ
        end
    par [Not Recording]
        FCC-->>+CR: OnButtonDown Invoke
        CR->>+C: Start Recording
        deactivate CR
        C-->>+CB: Clap When Recording
        deactivate C
    and [Recording]
        deactivate CB
        FCC-->>+CR: OnButtonDown Invoke
        CR->>C: Stop Recording
        deactivate CR
    end
    deactivate CS
    deactivate C
    deactivate FCC
@endmermaid

### b. CameraZoom
<figure>
<img src="/project-8pmStudios/zoomControl.gif" alt="Smooth Zoom Control">
<figcaption>Fig 2. SmoothZoom Control.</figcaption>
</figure>

ì¹´ë©”ë¼ ì¤Œì€ <kbd>FixedLensZoom</kbd>, <kbd>SmoothZoom</kbd> ë‘ê°€ì§€ ëª¨ë“œë¥¼ ì œê³µí•œë‹¤.\
ì¡°ì´ìŠ¤í‹±ì„ **Zì¶•** ë°©í–¥ìœ¼ë¡œë§Œ ì›€ì§ì¼ ìˆ˜ ìˆê³  ë‹¹ê¸°ë©´ ì¤Œì¸ ë°€ë©´ ì¤Œì•„ì›ƒì´ ëœë‹¤.

##### CameraZoom.cs

{% highlight cs %}
#region Subscribed Functions
/// <summary>
/// Perform smooth zoom.
/// </summary>
/// <param name="dir"></param>
private void Zoom(float dir)
{
    var fov = _cam.fieldOfView + dir * zoomAmount * Time.deltaTime;
    _cam.fieldOfView = Mathf.Clamp(fov,
        lensPresets.Lens[lensPresets.Lens.Length - 1].FoV,
            lensPresets.Lens[0].FoV);
}

/// <summary>
/// Perform fixed lens zoom.
/// </summary>
/// <param name="dir"></param>
private void FixedLens(float dir)
{
    var fov = _cam.fieldOfView + dir * zoomAmount * Time.deltaTime;
    var fovClamp = Mathf.Clamp(fov,
        lensPresets.Lens[lensPresets.Lens.Length - 1].FoV,
            lensPresets.Lens[0].FoV);
    var index = lensPresets.GetLensIndex(fovClamp);
    _cam.fieldOfView = lensPresets.Lens[index].FoV;
}
#endregion
{% endhighlight %}

ë‘ í•¨ìˆ˜ ëª¨ë‘ VR ì¡°ì´ìŠ¤í‹±ìœ¼ë¡œë¶€í„° ë°›ì€ ë°©í–¥ê°’ìœ¼ë¡œ ìƒˆë¡œìš´ fov ê°’ì„ ê³„ì‚°í•˜ì—¬ ì¹´ë©”ë¼ `.fieldOfView`ì— ë„£ì–´ì¤€ë‹¤.

<kbd>FixedLensZoom</kbd>ê°™ì€ ê²½ìš° '**Scriptable Object**'ì¸ <kbd>lensPreset</kbd>ì— ë¯¸ë¦¬ ì •ì˜ëœ fovê°’ê³¼ ë¹„êµí•˜ì—¬ ê°€ì¥ ê°’ì´ ë¹„ìŠ·í•œ ë Œì¦ˆì˜ fovë¥¼ ë°˜í™˜í•˜ëŠ” í˜•íƒœì´ë‹¤.

##### LensPresets.cs

{% highlight cs %}
#region Initialize
/// <summary>
/// This function should be called on Start.
/// </summary>
public void CreateDefaultLens()
{
    if (!_isInitialized)
    {
        List<LensPreset> defaults = new List<LensPreset>();
        defaults.Add(new LensPreset() { Name = "21mm", FoV = 60f });
        defaults.Add(new LensPreset() { Name = "35mm", FoV = 38f });
        defaults.Add(new LensPreset() { Name = "58mm", FoV = 23f });
        defaults.Add(new LensPreset() { Name = "80mm", FoV = 17f });
        defaults.Add(new LensPreset() { Name = "125mm", FoV = 10f });
        _lens = defaults.ToArray();
        _isInitialized = true;
    }
}
#endregion
{% endhighlight %}

ê³„ì‚°ëœ ê°’ì´ `_threshold`ë³´ë‹¤ ë‚®ë‹¤ë©´ ë Œì¦ˆë¥¼ ì°¾ì•˜ë‹¤ê³  íŒë‹¨í•˜ì—¬ í•´ë‹¹ ì¸ë±ìŠ¤ë¥¼ ë°˜í™˜í•œë‹¤.

##### LensPresets.cs

{% highlight cs %}
/// <summary>
/// Get the index of the lens preset that matches the fov value.
/// </summary>
/// <param name="fov"></param>
/// <returns></returns>
public int GetLensIndex(float fov)
{
    for (int i = 0; i < _lens.Length; ++i)
    {
        if (Mathf.Abs(_lens[i].FoV) - Mathf.Abs(fov) <= _threshold)
            return i;
    }
    return -1;
}
{% endhighlight %}

### c. CameraFocus

<figure>
<img src="/project-8pmStudios/camAutoFocus.gif" alt="Camera Auto Focus">
<figcaption>Fig 3. Camera Auto Focus.</figcaption>
</figure>

í¬ì»¤ìŠ¤ ê¸°ëŠ¥ì€ ì¤‘ì•™ì ì—ì„œ ë°”ë¼ë³´ê³  ìˆëŠ” ë¬¼ì²´ì— ìë™ìœ¼ë¡œ ì´ˆì ì„ ë§ì¶˜ë‹¤. í¬ì»¤ìŠ¤ ëª¨ë“œì—ëŠ” <kbd>ë§¤ë‰´ì–¼ í¬ì»¤ìŠ¤</kbd> ëª¨ë“œì™€ <kbd>ì˜¤í†  í¬ì»¤ìŠ¤</kbd> ëª¨ë“œê°€ ìˆë‹¤.

<kbd>autoFocus</kbd> ê¸°ëŠ¥ì€ ë©”ë‰´ë¥¼ í†µí•´ ì¼œê±°ë‚˜ ëŒ ìˆ˜ ìˆë‹¤.

##### CameraFocus.cs

{% highlight cs %}
#region Subscribed Functions
/// <summary>
/// ë§¤ë‰´ì–¼ í¬ì»¤ìŠ¤, ì˜¤í†  í¬ì»¤ìŠ¤ ëª¨ë‘ ê°™ì€ í•¨ìˆ˜ë¡œ ì‹¤í–‰ëœë‹¤. 
/// </summary>
private void Focus()
{
    StartCoroutine(Focusing());
}

private IEnumerator Focusing()
{
    if (_isCoroutineRunning) yield break;
    _isCoroutineRunning = true;

    var ray = new Ray(_cam.transform.position, _cam.transform.forward);

    if (Physics.SphereCast(ray, rayRadius, out var hit, rayLength))
    {
        var hitDst = Vector3.Distance(_cam.transform.position, hit.point);
        var elapsedTime = 0f;

        while (elapsedTime <= focusTime)
        {
            var lerpVal = Mathf.Lerp(_dof.focusDistance.value, hitDst,
                focusAc.Evaluate(elapsedTime / focusTime));
            _dof.focusDistance.value = lerpVal;
            elapsedTime += Time.fixedDeltaTime;
            yield return null;
        }
        _dof.focusDistance.value = hitDst;
    }
    _isCoroutineRunning = false;
}
{% endhighlight %}

í¬ì»¤ìŠ¤ ê¸°ëŠ¥ì€ `.SphereCast`ë¥¼ ì´ì„œ ë§ì¶˜ ëŒ€ìƒê¹Œì§€ì˜ ê±°ë¦¬ë¥¼ _dofì˜ `.focusDistance.value`ì— ë„£ì–´ì¤€ë‹¤. ë¶€ë“œëŸ½ê²Œ ì „í™˜ì„ ì£¼ê¸° ìœ„í•´ `Mathf.Lerp`ì™€ AnimationCurveë¥¼ ì‚¬ìš©í•˜ì˜€ë‹¤.

### d. CameraStabilizer

<figure>
<img src="/project-8pmStudios/cameraStabilizer.gif" alt="camera stabilizer">
<figcaption>Fig 4. Camera Stabilizer.</figcaption>
</figure>

VR ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ì‚¬ìš©ìì˜ ì›€ì§ì„ì„ ì •í™•í•˜ê²Œ ë”°ë¼ê°€ì•¼ í•˜ë¯€ë¡œ ì‘ì€ ì›€ì§ì„ë„ ë‹¤ íŒŒì•…í•œë‹¤. í•˜ì§€ë§Œ ì‚¬ìš©ì ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ë¯¼ê°ë„ëŠ” ì¹´ë©”ë¼ë¥¼ ë“¤ê³  ì´¬ì˜ ì‹œ ì¹˜ëª…ì ì¼ ìˆ˜ ìˆë‹¤. <kbd>CameraStabilizer</kbd>ëŠ” ì´ëŸ¬í•œ ì† ë–¨ë¦¼ ë¬¸ì œë¥¼ í•´ê²°í•´ì¤€ë‹¤.

##### CameraStabilizer.cs

{% highlight cs %}
[Header("Camera"), SerializeField]
private Transform filmCam = null;
[SerializeField]
private Transform camAnchor = null;
[Header("Stabilizer"), SerializeField]
private float positionStabilizeValue = 0.6f;
[SerializeField]
private float rotationStabilizeValue = 0.6f;

void Update()
{
    var positionOffset = Vector3.Distance(camAnchor.position, filmCam.position) + 1;
    filmCam.position = Vector3.Lerp(filmCam.position, camAnchor.position,
        positionOffset * Time.deltaTime * positionStabilizeValue * 10);

    var rotationOffset = Quaternion.Angle(camAnchor.rotation, filmCam.rotation);
    filmCam.rotation = Quaternion.Lerp(filmCam.rotation, camAnchor.rotation,
        rotationOffset * Time.deltaTime * rotationStabilizeValue / 1.5f);
}
{% endhighlight %}

'**Unity Camera**'ì˜ í¬ì§€ì…˜ê°’ê³¼ ë¡œí…Œì´ì…˜ê°’ì€ ì„¤ì •í•œ `camAnchor`ë¡œ í¬ì§€ì…˜ì€ ê±°ë¦¬ì— ë”°ë¼, ë¡œí…Œì´ì…˜ì€ ê°ë„ì— ë”°ë¼ Lerpí•œ ê°’ì´ ì ìš©ëœë‹¤.

### e. ClapperBoard & Preview Screen

<figure>
<img src="/project-8pmStudios/camScreen.gif" alt="camera screen info">
<figcaption>Fig 5. Camera screen info.</figcaption>
</figure>

<kbd>ClapperBoard</kbd>ëŠ” ì˜ìƒ í¸ì§‘ìì—ê²Œ ì¹´ë©”ë¼ì˜ <kbd>PreviewScreen</kbd>ì€ ì´¬ì˜ ê°ë…ì—ê²Œ ì•„ì£¼ ì¤‘ìš”í•œ ì •ë³´ë¥¼ ì œê³µí•œë‹¤.

ë…¹í™”ê°€ ì‹œì‘ë˜ë©´ <kbd>ClapperBoard</kbd>ê°€ ì˜ìƒ ì •ë³´ì™€ í•¨ê»˜ ì•Œì•„ì„œ í™”ë©´ì— í‘œì‹œë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. <kbd>PreviewScreen</kbd>ì—ëŠ” ë Œì¦ˆ ì •ë³´, ì´¬ì˜ ë‚ ì§œ/ì‹œê°„, í…Œì´í¬ ì •ë³´, ê·¸ë¦¬ê³  ë…¹í™” ìƒíƒœë¥¼ í‘œì‹œí•œë‹¤.

##### ClapperBoardController.cs

{% highlight cs %}
#region Subscribed Functions
/// <summary>
/// ë…¹í™” ì‹œì‘ì‹œ í•œë²ˆ í˜¸ì¶œë˜ê³  ê¸°ë¡ ë‚´ìš©ì„ ì—…ë°ì´íŠ¸í•œë‹¤.
/// </summary>
private void Clap()
{
    if (!_canClap) return;
    gameObject.SetActive(true);

    studioInfo.text = studioPreset.Studio;
    productionInfo.text = studioPreset.Production;
    directorInfo.text = studioPreset.Director;
    dateInfo.text = DateTime.UtcNow.ToLocalTime().ToString("yyyy.MM.dd");
    sceneInfo.text = studioPreset.Scene;
    takeInfo.text = studioPreset.TakeCount.ToString();

    Invoke("Action", delayTime);
}
private void Action() => _animator.SetTrigger("action");
{% endhighlight %}

<kbd>ClapperBoard</kbd> ì •ë³´ ëŒ€ë¶€ë¶„ì€ `studioPreset` ì´ë¼ëŠ” **Scriptable Object**ì— ê¸°ë¡ëœ ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤. ë…¹í™”ê°€ ì‹œì‘ë˜ë©´ ì‘ì€ ë”œë ˆì´ ì´í›„ì— ìŠ¬ë ˆì´íŠ¸ë¥¼ ì¹˜ê²Œ ëœë‹¤. 

## 2. ControlDeskSystem

<figure>
<img src="/project-8pmStudios/controlDeskButtons.png" alt="ControlDeskSystem Buttons">
<figcaption>Fig 6. ControlDeskSystem Buttons.</figcaption>
</figure>

<kbd>ControlDeskSystem</kbd>ëŠ” ì´¬ì˜ê°ë…ì´ í•œê³³ì—ì„œ ì—¬ëŸ¬ ëŒ€ ì¹´ë©”ë¼ë¥¼ í•œ ë²ˆì— ì œì–´í•˜ê±°ë‚˜ ì°ì€ ì˜ìƒì„ í™•ì¸í•˜ëŠ” ëª©ì ìœ¼ë¡œ ì‚¬ìš©ëœë‹¤. <kbd>FilmCamera</kbd>ì™€ ë§ˆì°¬ê°€ì§€ë¡œ ë„ˆë¬´ ë§ì€ ë²„íŠ¼ì„ í•œêº¼ë²ˆì— ì œê³µí•˜ë©´ ì‚¬ìš©ê°€ í–‡ê°ˆë ¤ í•˜ê³  ì‚¬ìš©ì ê²½í—˜ì´ ë” ë–¨ì–´ì§ˆ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ê°™ì€ ë²„íŠ¼ì„ ëª¨ë“œ ìŠ¤ìœ„ì¹˜ë¥¼ í†µí•´ ë‹¤ë¥¸ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•˜ê²Œë” êµ¬í˜„í•˜ì˜€ë‹¤.

<kbd>ControlDeskSystem</kbd>ëŠ” ë‘ê°€ì§€ ëª¨ë“œê°€ ìˆê³  ëª¨ë“œì— ë”°ë¼ ê°™ì€ ë²„íŠ¼ì´ ë‹¤ë¥¸ ê¸°ëŠ¥ì„ í•˜ê²Œ ëœë‹¤.

**CameraControlMode**
- *Mode Switch Button* : <kbd>VideoControlMode</kbd>ë¡œ ë³€ê²½
- *Previous Button* : ì´ì „ ì¹´ë©”ë¼ì˜ í”„ë¦¬ë·° ìŠ¤í¬ë¦°ì„ í™”ë©´ì— ë„ìš´ë‹¤
- *Next Button* : ë‹¤ìŒ ì¸ë±ìŠ¤ì˜ ì¹´ë©”ë¼ í”„ë¦¬ë·° ìŠ¤í¬ë¦°ì„ í™”ë©´ì— ë„ìš´ë‹¤
- *Primary Button* : ì„ íƒëœ ì¹´ë©”ë¼ ë…¹í™”/ì¤‘ì§€
- *Secondary Button* : í˜„ì¬ ì¹´ë©”ë¼ ì„ íƒ/í•´ì œ

**VideoControlMode**
- *Mode Switch Button*: <kbd>CameraControlMode</kbd>ë¡œ ë³€ê²½
- *Previous Button*: ì €ì¥ë˜ì–´ ìˆëŠ” ì´ì „ ì˜ìƒì„ ì¬ìƒ
- *Next Button*: ì €ì¥ë˜ì–´ ìˆëŠ” ë‹¤ìŒ ì¸ë±ìŠ¤ì˜ ì˜ìƒì„ ì¬ìƒ
- *Primary Button*: ì˜ìƒ ì¬ìƒ/ì¼ì‹œì •ì§€, ì˜ìƒ ì‚­ì œ í™•ì¸
- *Secondary Button*: ì˜ìƒ ì‚­ì œ, ì˜ìƒ ì‚­ì œ ì·¨ì†Œ

### a. êµ¬ì¡°

<kbd>ControlDeskSystem</kbd>ì˜ êµ¬ì¡°ëŠ” <kbd>FilmCamera</kbd>ì˜ êµ¬ì¡°ì™€ ë¹„ìŠ·í•˜ë‹¤. <kbd>ControlDeskSystem</kbd>ì˜ ê¸°ëŠ¥ì€ ëª¨ë“œê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ ì½œë°±í•¨ìˆ˜ì— êµ¬ë…ë˜ëŠ” ê¸°ëŠ¥ì´ ë°”ë€Œê²Œ ëœë‹¤. 

##### : Delegate Funcitons

{% highlight cs %}
#region Delegates
public delegate void ModeControlDeskButton(ControlMode mode);
public delegate void ControlDeskButton();

public ModeControlDeskButton ModeSwitchAction = null;
public ControlDeskButton PreviousAction = null;
public ControlDeskButton NextAction = null;
public ControlDeskButton PrimaryAction = null;
public ControlDeskButton SecondaryAction = null;
#endregion
{% endhighlight %}

##### : ControlDeskSystem Sequence Diagram

@startmermaid
sequenceDiagram
    participant CDS as ControlDeskSystem
    participant FCM as FilmCameraManager
    participant VPM as VideoPlayerManager
    participant OS as OutputScreen
    participant C1 as Camera_1

    activate CDS
    activate OS
    activate C1
    C1->>CDS: If Active Let Control Desk Know
    par [previous state : VideoControlMode]
        CDS-->>+FCM: Mode OnButtonDown
        FCM->>FCM: Subscribe Callbacks
        deactivate FCM
        CDS-->>+VPM: Mode OnButtonDown
        VPM->>VPM: Unsubscribe Callbacks
        deactivate VPM
    and [previous state : CameraControlMode]
        CDS-->>+FCM: Mode OnButtonDown
        FCM->>FCM: Unsubscribe Callbacks
        deactivate FCM
        CDS-->>+VPM: Mode OnButtonDown
        VPM->>VPM: Subscribe Callbacks
        deactivate VPM
    end
    alt current state : CameraControlMode
        CDS-->>+FCM: Previous OnButtonDown
        FCM->>OS: Show Previous Camera Screen
        deactivate FCM
    else current state : VideoControlMode
        CDS-->>+VPM: Previous OnButtonDown
        VPM->>OS: Show Previous Recorded Video
        deactivate VPM
    end
    alt current state : CameraControlMode
        CDS-->>+FCM: Next OnButtonDown
        FCM->>OS: Show Next Camera Screen
        deactivate FCM
    else current state : VideoControlMode
        CDS-->>+VPM: Next OnButtonDown
        VPM->>OS: Show Next Recorded Video
        deactivate VPM
    end
    alt current state : CameraControlMode
        CDS-->>+FCM: Primary OnButtonDown
        par [current state : not recording]
            FCM->>C1: Record Selected
        and [current state : recording]
            FCM->>C1: Stop Record Selected
            deactivate FCM
        end
    else current state : VideoControlMode
        CDS-->>+VPM: Primary OnButtonDown
        par [current state : paused]
            VPM->>OS: Play Video
        and [current state : playing]
            VPM->>OS: Pause Video
            deactivate VPM
        end
    end
    alt current state : CameraControlMode
        CDS-->>+FCM: Secondary OnButtonDown
        par [current state : selected]
            FCM->>C1: Deselect Camera
        and [current state : not selected]
            FCM->>C1: Select Camera
            deactivate FCM
        end
    else current state : VideoControlMode
        CDS-->>+VPM: Secondary OnButtonDown
        par [delete mode : on]
            VPM->>OS: Cancel Delete Mode
        and [delete mode : off]
            VPM->>OS: Turn On Delete Mode
            deactivate VPM
        end
    end
    deactivate OS
    deactivate C1
    deactivate CDS
@endmermaid

### b. FilmCameraManager

<kbd>ControlDeskSystem</kbd>ì—ì„œ ëª¨ë“œ ë³€ê²½ ì‹ í˜¸ê°€ ë“¤ì–´ì˜¤ë©´ êµ¬ë…ëœ `OnModeChange()` í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ê³  ëª¨ë“œê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ ì½œë°±í•¨ìˆ˜ì— êµ¬ë…í•˜ê±°ë‚˜ ì·¨ì†Œí•˜ê²Œ ëœë‹¤. 

##### FilmCameraManager.cs

{% highlight cs %}
private void OnModeChange(ControlMode mode)
{
    _currentMode = mode;
    if (_currentMode.Equals(ControlMode.CameraViewer))
    {
        _deskController.PreviousAction += ShowPreviousCam;
        _deskController.NextAction += ShowNextCam;
        _deskController.PrimaryAction += RecordSelectedCam;
        _deskController.SecondaryAction += SelectCam;
    }
    else
    {
        _deskController.PreviousAction -= ShowPreviousCam;
        _deskController.NextAction -= ShowNextCam;
        _deskController.PrimaryAction -= RecordSelectedCam;
        _deskController.SecondaryAction -= SelectCam;
    }
}
{% endhighlight %}

<kbd>FilmCameraManager</kbd>ëŠ” ì—¬ëŸ¬ ëŒ€ì˜ ì¹´ë©”ë¼ë¥¼ ê´€ë¦¬í•˜ëŠ” ì—­í• ì„ ê°€ì§€ê³  ìˆë‹¤.

<figure>
<img src="/project-8pmStudios/switchCam.gif" alt="Switch Camera View">
<figcaption>Fig 7. Switch Camera View.</figcaption>
</figure>

##### FilmCameraManager.cs

{% highlight cs %}
private void ShowScreen(int index)
{
    if (_filmCameras.Count > index)
    {
        var sc = _filmCameras[index].GetComponentInChildren<ScreenController>();
        _viewScreen.GetComponent<Renderer>().material.mainTexture = sc.NotRecordingRt;
    }
}
{% endhighlight %}

<kbd>NextButton</kbd>ì´ë‚˜ <kbd>PreviousButton</kbd>ì´ í˜¸ì¶œë˜ë©´ ë‹¤ìŒ ì¸ë±ìŠ¤ë¥¼ `ShowScreen()`ì— ë„˜ê²¨ì¤€ë‹¤. ë„˜ê²¨ë°›ì€ ì¸ë±ìŠ¤ì— í•´ë‹¹í•˜ëŠ” ì¹´ë©”ë¼ì˜ **RenderTextureë¥¼** <kbd>ScreenController</kbd>ë¡œ ë¶€ í„° ë°›ì•„ì˜¨ë‹¤. ë°›ì•„ì˜¨ **RT**ë¥¼ í™”ë©´ ë©”í…Œë¦¬ì–¼ì— ë„£ì–´ì¤€ë‹¤.

### c. VideoPlayerManager

<figure>
<img src="/project-8pmStudios/watchSaved.gif" alt="Watch Saved Video">
<figcaption>Fig 8. Watch Saved Video.</figcaption>
</figure>

<kbd>VideoPlayerManager</kbd>ëŠ” ì°ì€ ì˜ìƒì„ ë°”ë¡œ í™•ì¸í•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤.

##### VideoPlayerManager.cs

{% highlight cs %}
/// <summary>
/// Update video name list.
/// ì˜ìƒì´ ì €ì¥ë˜ë©´ í˜¸ì¶œëœë‹¤.
/// </summary>
public void UpdateVideoList()
{
    var fileNames = Directory.GetFiles(CAPTURE_PATH, "*.mp4");
    Array.Sort(fileNames);

    if (_videoNames == null)
    {
        _videoNames = new List<string>();
    }
    else if (_videoNames.Count > 0)
    {
        _videoNames.Clear();
    }

    foreach (var name in fileNames)
    {
        _videoNames.Add(Path.GetFileNameWithoutExtension(name));
    }
}
{% endhighlight %}

ì˜ìƒ ëª©ë¡ì€ ì˜ìƒ ì´ë¦„ìœ¼ë¡œ ê´€ë¦¬ë¥¼ í•œë‹¤. ìƒˆë¡œìš´ ì˜ìƒì´ ì°íˆë©´ `UpdateVideoList()`ê°€ í˜¸ì¶œë˜ê³  í•­ìƒ ìµœì‹  ë¦¬ìŠ¤íŠ¸ë¥¼ ê°€ì§€ê²Œ ëœë‹¤.

##### VideoPlayerManager.cs

{% highlight cs %}
private void PlayPause()
{
    if (_videoPlayer.isPlaying)
        _videoPlayer.Pause();
    else
        _videoPlayer.Play();
}

private void PlayNew(int index)
{
    if (_videoPlayer.isPlaying)
        _videoPlayer.Stop();
    if (_videoNames.Count > index)
        StartCoroutine(LoadVideo(_videoNames[index]));
}

private IEnumerator LoadVideo(string name)
{
    if (_isLoading) yield break;
    _isLoading = true;
    _videoPlayer.url = CAPTURE_PATH + name + ".mp4";
    _isLoading = false;
}
{% endhighlight %}

í˜„ì¬ ì¬ìƒ ì˜ìƒì€ ì¸ë±ìŠ¤ë¡œ ê´€ë¦¬ëœë‹¤. ìƒˆë¡œìš´ ì˜ìƒì„ ë¶ˆëŸ¬ì˜¬ ë•ŒëŠ” ì¸ë±ìŠ¤ì— í•´ë‹¹í•˜ëŠ” ì˜ìƒ ì´ë¦„ìœ¼ë¡œ ì°¾ëŠ”ë‹¤. 

## 3. CameraPathCreator

<figure>
<img src="/project-8pmStudios/pathCreator.png" alt="Path Creator">
<figcaption>Fig 9. Path Creator.</figcaption>
</figure>

<kbd>CameraPathCreator</kbd>ë¡œ ì›¨ì´í¬ì¸íŠ¸ë¥¼ ë§Œë“¤ì–´ ì†ì‰½ê²Œ ì´¬ì˜í•  ìˆ˜ ìˆë‹¤. <kbd>Anchor Point</kbd>ì™€ <kbd>Control Point</kbd>ë¥¼ VR ìƒì—ì„œ ì›í•˜ëŠ” ê³³ì— ë°°ì¹˜í•  ìˆ˜ ìˆê³  <kbd>Cart</kbd>ì— ì¹´ë©”ë¼ë¥¼ ì¥ì°©í•˜ê³  ì¶œë°œ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì„¤ì •í•œ ì†ë„ë¡œ <kbd>Cart</kbd>ê°€ ì›€ì§ì´ê²Œ ëœë‹¤.

### a. êµ¬ì¡°

<kbd>CameraPathCreator</kbd>ëŠ” <kbd>Object Pool</kbd>ì—ì„œ ë¯¸ë¦¬ ë§Œë“¤ì–´ì§„ **Point**ë“¤ì„ ë°°ì¹˜í•˜ê³  <kbd>PathViewer</kbd>ê°€ **Point**ë“¤ì„ ì´ì–´ì„œ **Path**ë¥¼ ë§Œë“ ë‹¤. 

##### : CameraPathCreator Sequence Diagram

@startmermaid
sequenceDiagram
    participant OP as ObjectPool
    participant PC as PathCreator
    participant PD as PointDetector
    participant PV as PathViewer

    activate OP
    activate PC
    OP->>OP: Create Pool
    PC-->>+PV: if point > 1 : Update Viewer
    alt point not detected
        PC-->>+OP: Has Input : Request Point
        OP->>-PC: Return Point
    else point detected
        PD-->>PC: OnTriggerEnter With Point
        PC-->>+OP: Has Input : Remove Point
        OP->>-PC: Remove Point
    end
    deactivate PV
    deactivate PC
    deactivate OP
@endmermaid

### b. BezierCurves

<figure>
<img src="/project-8pmStudios/controlPath.gif" alt="Bezier Curve">
<figcaption>Fig 10. Bezier Curve.</figcaption>
</figure>

##### BezierCurves.cs

<kbd>CameraPathCreator</kbd>ì˜ í•µì‹¬ì¸ **BezierCurve**ì´ë‹¤. [ìœ„í‚¤](https://en.wikipedia.org/wiki/BÃ©zier_curve)ì˜ ê³µì‹ì„ ì°¸ê³ í•´ì„œ static í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ ì‚¬ìš©í•˜ì˜€ë‹¤.

{% highlight cs %}
public static Vector3 LinearBezierCurves(Vector3 a, Vector3 b, float t)
{
    return a + t * (b - a);
}

public static Vector3 QuadraticBezierCurves(Vector3 a, Vector3 b, Vector3 c, float t)
{
    return Mathf.Pow(1 - t, 2) * a + 2 * (1 - t) * t * b + Mathf.Pow(t, 2) * c;
}

public static Vector3 CubicBezierCurves(Vector3 a, Vector3 b, Vector3 c, Vector3 d, float t)
{
    return Mathf.Pow(1 - t, 3) * a + 3 * Mathf.Pow(1 - t, 2) * t * b +
        3 * (1 - t) * Mathf.Pow(t, 2) * c + Mathf.Pow(t, 3) * d;
}
{% endhighlight %}

### c. PathCreator

<figure>
<img src="/project-8pmStudios/path.gif" alt="Create Path">
<figcaption>Fig 11. Create Path.</figcaption>
</figure>

<kbd>PathCreator</kbd>ëŠ” <kbd>CameraPathCreator</kbd>ì˜ ì¤‘ì‹¬ì¶•ìœ¼ë¡œ <kbd>Object Pool</kbd>ì™€ <kbd>PathViewer</kbd> ì‚¬ì´ì—ì„œ ì»¨íŠ¸ë¡¤ í•˜ëŠ” ì‘ì—…ì„ í•œë‹¤. 

##### PathCreator.cs

{% highlight cs %}
/// <summary>
/// Gets called when an active Path Point is not detected
/// and when the VR button is pressed.
/// </summary>
public void AddPoint()
{
    if (!_detector.IsTriggerStay)
    {
        var point = _pool.ActivatePoint(spawnPoint.position, spawnPoint.rotation);
        if (point != null)
        {
            _points.Add(point);
        }
        if (_points.Count > 1)
        {
            _cart.transform.position = _points[0].position;
            _cart.SetActive(true);
        }
    }
}

/// <summary>
/// Gets called when an active Path Point is detected
/// and when the VR button is pressed.
/// </summary>
/// <param name="point"></param>
public void RemovePoint(Transform point)
{
    int index = _points.FindIndex(p => p == point);
    if (index != -1)
    {
        _pool.TerminatePoint(_points[index]);
        _points.RemoveAt(index);
    }

    if (_points.Count < 2)
    {
        _cart.SetActive(false);
    }
}
{% endhighlight %}

**Point**ì˜ ìƒì„±ì€ <kbd>PointDetector</kbd>ì— **Point**ê°€ íŠ¸ë¦¬ê±°ë˜ëŠ”ê²ƒì´ ì—†ì„ë•Œë§Œ ê°€ëŠ¥í•˜ë‹¤. 

**Point**ì˜ ì‚­ì œëŠ” <kbd>PointDetector</kbd>ë¡œ ë¶€í„° ê±´ë„¤ ë°›ì€ **Point**ì˜ **Transform**ì˜ ì¸ë±ìŠ¤ë¥¼ ì°¾ì•„ <kbd>ObjectPool</kbd>ì—ì„œ `.TerminatePoint()` ê³¼ì •ì„ ê±°ì¹œë‹¤.

### d. PathPool

<kbd>PathPool</kbd>ì€ Stackì„ ì´ìš©í–ˆë‹¤. **has-a** ë°©ì‹ìœ¼ë¡œ **Object Pool**ì„ ìƒì„±í•˜ì—¬ **MonoBehaviour**ì˜ life cycleì„ íƒ€ì§€ ì•Šê²Œ í•˜ì˜€ë‹¤.

##### PathPool.cs

{% highlight cs %}
public PathPool(MonoBehaviour mono, GameObject spawnObject, int pathCount)
{
    InitVariables(mono, spawnObject, pathCount);
    CreatePool();
}

private void CreatePool()
{
    _poolRoot = GameObject.Find("PathPool");
    if (_poolRoot == null)
    {
        _poolRoot = new GameObject("PathPool");
    }
    for (int i = 0; i < _pathCount; i++)
    {
        var point = MonoBehaviour.Instantiate(_spawnObject, _mono.transform.position,
            Quaternion.identity, _poolRoot.transform);
        point.SetActive(false);
        _pathPool.Push(point);
    }
}
{% endhighlight %}

### e. PathViewer

<figure>
<img src="/project-8pmStudios/pathCart.gif" alt="Camera Path + Cart">
<figcaption>Fig 12. Camera Path + Cart.</figcaption>
</figure>

<kbd>PathViewer</kbd>ëŠ” ì²˜ìŒ ìƒì„±ìì—ì„œ ë„˜ê²¨ë°›ì€ **Point** ë¦¬ìŠ¤íŠ¸ ë ˆí¼ëŸ°ìŠ¤ë¥¼ ê°€ì§€ê³  **LineRenderer**ë¥¼ í†µí•´ ì„ ì„ ê·¸ë¦°ë‹¤.

##### PathViewer.cs

{% highlight cs %}
/* Cubic Bezier Curve */
case var expression when points > 3:
    t = 0f;
    for (int i = 0; i < SegmentCount(); i++)
    {
        var cp1 = _points[i * 3 + 1].GetComponent<Renderer>();
        var cp2 = _points[i * 3 + 2].GetComponent<Renderer>();
        cp1.material = _controlPointMat;
        cp2.material = _controlPointMat;

        Vector3[] segment = GetPointsInSegment(i);
        for (int j = 0; j < _lr.positionCount; j++)
        {
            _lr.SetPosition(j, BezierCurves.CubicBezierCurves(
                segment[0], segment[1], segment[2], segment[3], t));
            t += (1 / (float)_lr.positionCount);
        }
    }
    break;
{% endhighlight %}

`.GetPointsInSegment()`ëŠ” **Point**ë¥¼ 3ê°œì”© ê²¹ì¹˜ë„ë¡ ë°˜í™˜ í•œë‹¤.

<br />